import{d as S,u as G,j as x,o as B,c as M,K as J,w as v,a as c,b as i,m as b,e as m,t as d,n,f as k,g as f,v as D,h as O,z as U,P as X,p as Z,r as w,l as V,k as P}from"./index-4405b5ba.js";import{_}from"./index.vue_vue_type_script_setup_true_lang-c5acbf2f.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-5a95ef0c.js";import{_ as te}from"./memberData.vue_vue_type_script_setup_true_lang-b6bd204d.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-c636670e.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-849de14f.js";import"./SearchBox.vue_vue_type_script_setup_true_lang-a6a08cb4.js";import"./index.vue_vue_type_script_setup_true_lang-e29cff9c.js";const se={key:1,class:"text-left"},oe=f("i",{class:"fas fa-undo-alt"},null,-1),ie=f("i",{class:"fas fa-check"},null,-1),ae=f("i",{class:"fas fa-check"},null,-1),le=S({__name:"SettingPopup",props:{pop:null,content:null,whichPop:null},emits:["back","save"],setup(e,{emit:s}){const a=e;G();const{mobileWidth:u}=x();return B(()=>{console.log("pop content:",a.content,"==>",a.pop.step,a.pop.content,":",a.whichPop)}),(r,p)=>{const l=D("el-scrollbar");return e.pop.value?(i(),M(ne,{key:0,title:e.pop.title,content:e.pop.content,css:e.pop.css},J({"btn-content":v(()=>[e.pop.step==1||e.pop.step==2&&e.whichPop=="reg"?(i(),m("div",{key:0,class:"btn",onClick:p[0]||(p[0]=h=>r.$emit("close"))},[oe,k(d(r.$t("button.no")),1)])):c("",!0),e.pop.step==1||e.pop.step==2&&e.whichPop=="reg"?(i(),m("div",{key:1,class:"btn btn-red",onClick:p[1]||(p[1]=h=>r.$emit("yes"))},[ie,k(d(r.$t("button.yes")),1)])):c("",!0),e.pop.step==2&&e.whichPop=="cancel"||e.pop.step==3&&e.whichPop=="reg"?(i(),m("div",{key:2,class:"btn btn-red",onClick:p[2]||(p[2]=h=>r.$emit("close"))},[ae,k(d(r.$t("button.done")),1)])):c("",!0)]),_:2},[e.whichPop=="reg"&&e.pop.step!==3?{name:"content",fn:v(()=>[b(l,{class:"pop-mission-box",height:n(u)?"80px":"180px"},{default:v(()=>[e.pop.step==1&&e.whichPop=="reg"?(i(),M(I,{key:0,data:e.content},null,8,["data"])):c("",!0),e.pop.step==2&&e.whichPop=="reg"?(i(),m("div",se,d(e.content.detail),1)):c("",!0)]),_:1},8,["height"])]),key:"0"}:void 0]),1032,["title","content","css"])):c("",!0)}}}),ce={class:"mission-page"},re={key:1,class:"page-bread"},pe={class:"page-bread-bc"},me={class:"page-bread-item"},ue={key:2},Pe=S({__name:"index",setup(e){const{t:s}=O(),a=U(),{getMemberBoolean:u,memberIDValue:r}=x(),{missionForm:p,mission:l,seeDetail:h,backTable:N}=X(),{pop:t,closePop:C}=Z(),z=w({gridTemplateColumns:"1fr 1fr 1fr 100px 1fr 1fr 1fr 1fr 100px"}),R=w({each:10,total:2}),$=V(0),g=V(""),H=P(()=>[{name:s("MissionManagment.MissionRegister.field.MissionType"),type:1},{name:s("MissionManagment.MissionRegister.field.MissionName"),type:1},{name:s("MissionManagment.MissionRegister.field.MissionLocation"),type:1},{name:s("MissionManagment.MissionRegister.field.Date"),type:1},{name:s("MissionManagment.MissionRegister.field.Point"),type:1},{name:s("MissionManagment.MissionRegister.field.Quota"),type:1},{name:s("MissionManagment.MissionRegister.field.MemberTier"),type:1},{name:s("MissionManagment.MissionRegister.field.Status"),type:1},{name:s("MissionManagment.MissionRegister.field.Registration"),type:2}]),y=P(()=>p.missionHistoryInfo.map(o=>(console.log("e?",o),{value:o,icon:"fa-edit",css:o.state=="已滿額"?"text-gray":"",data:{MissionType:o.missionType,MissionName:o.missionName,MissionLocation:o.location,Date:o.date,Point:o.point,Quota:o.quota,MemberTier:o.memberTier,Status:o.state,icon:"fa-edit"}}))),K=P(()=>({detail:t.step==1?l.detail:s("MissionManagment.MissionRegister.tc"),status:null})),L=()=>{a.setMemberInfo(a.nullMemberInfo)},Q=()=>{a.setMemberInfo(a.nullMemberInfo)},j=o=>{a.setMemberInfo(o)},q=()=>{},T=()=>{$.value+=1,t.step=1,t.value=!0},E=()=>{g.value="reg",t.css="pop-reg",T(),t.title=s("MissionManagment.MissionRegister.popValue.registration.title"),t.content=s("MissionManagment.MissionRegister.popValue.registration.content")},F=()=>{g.value="cancel",T(),t.title=s("MissionManagment.MissionRegister.popValue.cancel.title"),t.content=s("MissionManagment.MissionRegister.popValue.cancel.content")},W=()=>{g.value=="cancel"?(t.step=2,t.content=s("MissionManagment.MissionRegister.popValue.cancel.success")):(t.step+=1,t.step==2&&(t.content=""),t.step==3&&(t.css="",t.content=s("MissionManagment.MissionRegister.popValue.cancel.success")))},Y=()=>{g.value=="cancel"?(C(),t.step==2&&(l.detail=null)):g.value=="reg"&&(t.step==2?(t.step=1,t.content=s("MissionManagment.MissionRegister.popValue.registration.content")):(C(),t.step==3&&(l.detail=null)))};return B(()=>{L()}),(o,ge)=>{const A=D("el-pagination");return i(),m("div",ce,[b(_,{value:n(r),closeTable:n(u),onSearch:Q,onClick:j},null,8,["value","closeTable"]),n(u)?(i(),M(te,{key:0})):c("",!0),n(u)?(i(),m("div",re,[f("div",pe,[f("div",me,d(n(l).name?n(l).name:" "),1)])])):c("",!0),n(y).length!=0&&n(u)&&!n(l).detail?(i(),m("section",ue,[b(ee,{total:R.total,tableData:n(y),tableTitle:n(H),PCgridTemplateColumns:z,onClick:n(h)},null,8,["total","tableData","tableTitle","PCgridTemplateColumns","onClick"]),b(A,{"page-size":R.each,layout:"prev, pager, next",total:n(y).length,onCurrentChange:q},null,8,["page-size","total"])])):c("",!0),n(l).detail?(i(),M(I,{key:3,data:n(l),onBack:n(N),onReg:E,onCancel:F},null,8,["data","onBack"])):c("",!0),(i(),M(le,{key:$.value,pop:n(t),content:n(K),whichPop:g.value,onClose:Y,onYes:W},null,8,["pop","content","whichPop"]))])}}});export{Pe as default};
