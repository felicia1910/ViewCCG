import{d as D,h as k,l as v,c as y,w as I,a as c,b as i,e as r,g as p,t as m,n as o,H as P,O as z,f as d,z as E,j as G,p as J,r as f,o as K,k as T,m as g,I as Q}from"./index-4405b5ba.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-c5acbf2f.js";import{_ as X}from"./memberData.vue_vue_type_script_setup_true_lang-21b6be4e.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-e29cff9c.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-5a95ef0c.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-849de14f.js";import"./SearchBox.vue_vue_type_script_setup_true_lang-a6a08cb4.js";const ae={key:0},oe=["src"],ne={key:1,class:"approvalConfirmReject"},le=["placeholder"],se={key:2,class:"approvalConfirmReject"},ie=p("i",{class:"fas fa-undo-alt"},null,-1),ce=p("i",{class:"fas fa-undo-alt"},null,-1),re=p("i",{class:"fas fa-check"},null,-1),pe=p("i",{class:"fas fa-undo-alt"},null,-1),me=p("i",{class:"fas fa-check"},null,-1),ue=D({__name:"SettingPopup",props:{outImage:null,pop:null},emits:["back","handleRejectReason","handleYesApproval"],setup(n,{emit:a}){const{t:s}=k(),u=v("");return(A,l)=>n.pop.value?(i(),y(te,{key:0,title:n.pop.title,content:n.pop.content,css:n.pop.css},{content:I(()=>[n.pop.step==1?(i(),r("div",ae,[n.outImage?(i(),r("img",{key:0,class:"previewImage",src:n.outImage,width:"200"},null,8,oe)):c("",!0)])):c("",!0),n.pop.step==2?(i(),r("div",ne,[p("p",null,m(o(s)("PointManagment.Approval.showMsg.ConfirmReject")),1),P(p("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>u.value=t),placeholder:o(s)("PointManagment.Approval.showMsg.InputReason")},null,8,le),[[z,u.value]])])):c("",!0),n.pop.step==3?(i(),r("div",se,[p("p",null,m(o(s)("PointManagment.Approval.showMsg.ConfirmMsg")),1)])):c("",!0)]),"btn-content":I(()=>[n.pop.step==1?(i(),r("div",{key:0,class:"btn",onClick:l[1]||(l[1]=t=>a("back"))},[ie,d(m(o(s)("button.back")),1)])):c("",!0),n.pop.step==2?(i(),r("div",{key:1,class:"btn",onClick:l[2]||(l[2]=t=>a("back"))},[ce,d(m(o(s)("button.no")),1)])):c("",!0),n.pop.step==2?(i(),r("div",{key:2,class:"btn btn-red",onClick:l[3]||(l[3]=t=>a("handleRejectReason",u.value))},[re,d(m(o(s)("button.yes")),1)])):c("",!0),n.pop.step==3?(i(),r("div",{key:3,class:"btn",onClick:l[4]||(l[4]=t=>a("back"))},[pe,d(m(o(s)("button.no")),1)])):c("",!0),n.pop.step==3?(i(),r("div",{key:4,class:"btn btn-red",onClick:l[5]||(l[5]=t=>a("handleYesApproval"))},[me,d(m(o(s)("button.yes")),1)])):c("",!0)]),_:1},8,["title","content","css"])):c("",!0)}}),de={class:"Approval"},ve={class:"searchBox"},be={class:"showAllTable"},Pe=D({__name:"index",setup(n){const{t:a}=k(),s=E(),{doUserField:u,memberIDValue:A,getMemberBoolean:l}=G(),{pop:t,commonsSaveHandle:fe,commonsSaveSuccess:ge,commonsSaveFalse:he,closePop:h}=J(),R=v(!0),M=v(!1),b=v(null),C=v(null);let _=f({Location:{value:"",err:"",field:"Location"},Datetime:{value:"",err:"",field:"Datetime"}});const w=f({data:{Location:[{id:"1",name:"locationOption1"},{id:"2",name:"locationOption2"},{id:"3",name:"locationOption3"}]}}),$=f({id:"0",tableTemp:[{Case:1,DateTime:"2023-03-01",TransactionID:"CT0000091",RequestID:"AA0000091",phoneNo:"06888168",Amount:"150",Point:"20",MemberID:"694038683",Receipt:"https://picsum.photos/100/140"},{Case:2,DateTime:"2023-03-01",TransactionID:"CT0000092",RequestID:"AA0000092",phoneNo:"0756168",Amount:"1000",Point:"50",MemberID:"876502931",Receipt:"https://picsum.photos/100/140"}]}),S=f({gridTemplateColumns:"80px 1fr 1fr 1fr 1fr 1fr 1fr 3fr"});K(()=>{U()});const j=T(()=>({Location:u(a("PointManagment.Approval.field.Location"),"d",!1,R.value)})),x=T(()=>[{name:a("PointManagment.Approval.tableTitle.Case"),type:1},{name:a("PointManagment.Approval.tableTitle.DateTime"),type:1},{name:a("PointManagment.Approval.tableTitle.TransactionID"),type:1},{name:a("PointManagment.Approval.tableTitle.RequestID"),type:1},{name:a("PointManagment.Approval.tableTitle.Amount"),type:1},{name:a("PointManagment.Approval.tableTitle.Point"),type:1},{name:a("PointManagment.Approval.tableTitle.MemberID"),type:1},{name:a("PointManagment.Approval.tableTitle.Receipt"),type:3}]),V=T(()=>$.tableTemp.map(e=>({value:e,icon:null,data:{Case:e.Case,DateTime:e.DateTime,TransactionID:e.TransactionID,RequestID:e.RequestID,Amount:e.Amount,Point:e.Point,MemberID:e.MemberID,Receipt:e.Receipt}}))),B=e=>{console.log(e),C.value=e,t.step=1,t.title=a("PointManagment.Approval.alertTitle.View"),t.value=!0,t.css="pointApprovalPop"},H=()=>{h()},L=e=>{console.log(e),b.value=e.Case,t.step=2,t.title=a("PointManagment.Approval.alertTitle.Confirm"),t.value=!0,t.css=""},N=e=>{console.log(e),b.value=e.Case,t.step=3,t.title=a("PointManagment.Approval.alertTitle.Confirm"),t.value=!0,t.css=""},q=e=>{console.log("Reject:",b.value),console.log(e),h()},O=()=>{console.log("Approval:",b.value),h()},Y=e=>{s.setMemberInfo(e),M.value=!0},F=()=>{M.value=!1,s.setMemberInfo(s.nullMemberInfo)},U=()=>{s.setMemberInfo(s.nullMemberInfo)};return(e,Me)=>(i(),r("div",de,[g(Z,{label:o(j).Location,value:o(_).Location,items:w.data.Location},null,8,["label","value","items"]),p("div",ve,[g(W,{value:o(A),closeTable:o(l),onSearch:F,onClick:Y},null,8,["value","closeTable"]),o(l)?(i(),y(X,{key:0})):c("",!0)]),P(p("div",be,[g(ee,{tableData:o(V),tableTitle:o(x),PCgridTemplateColumns:S,onHandleShowImg:B,onHandleVerify:L,onHandleConfirm:N},null,8,["tableData","tableTitle","PCgridTemplateColumns"])],512),[[Q,M.value]]),g(ue,{outImage:C.value,pop:o(t),onBack:H,onHandleRejectReason:q,onHandleYesApproval:O},null,8,["outImage","pop"])]))}});export{Pe as default};
