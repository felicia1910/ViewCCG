import{d as B,u as j,o as U,b as d,c as x,w as q,e as h,f as C,t as v,a as b,g as p,h as F,z as V,A as Q,j as W,p as X,B as Z,r as S,l as T,k as D,n as e,m as n,v as ee,C as ae,D as te,E as A,q as se}from"./index-4405b5ba.js";import{_ as le}from"./SearchBox.vue_vue_type_script_setup_true_lang-a6a08cb4.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-0fef365a.js";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang-e29cff9c.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang-849de14f.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_lang-5a95ef0c.js";const ie=p("i",{class:"fas fa-undo-alt"},null,-1),ue=p("i",{class:"fas fa-check"},null,-1),de=p("i",{class:"fas fa-check"},null,-1),me=B({__name:"SettingPopup",props:{pop:null},emits:["back","save"],setup(g,{emit:a}){j();const I=()=>{a("save")};return U(()=>{}),(m,t)=>g.pop.value?(d(),x(oe,{key:0,title:g.pop.title,content:g.pop.content,css:g.pop.css},{"btn-content":q(()=>[g.pop.step==1?(d(),h("div",{key:0,class:"btn",onClick:t[0]||(t[0]=y=>a("back"))},[ie,C(v(m.$t("button.no")),1)])):b("",!0),g.pop.step==1?(d(),h("div",{key:1,class:"btn btn-red",onClick:t[1]||(t[1]=y=>I())},[ue,C(v(m.$t("button.yes")),1)])):b("",!0),g.pop.step==2?(d(),h("div",{key:2,class:"btn btn-red",onClick:t[2]||(t[2]=y=>a("back"))},[de,C(v(m.$t("button.ok")),1)])):b("",!0)]),_:1},8,["title","content","css"])):b("",!0)}}),ce={class:"btn-box"},fe=p("i",{class:"fas fa-edit"},null,-1),be=p("i",{class:"fas fa-undo-alt"},null,-1),pe=p("i",{class:"fas fa-save"},null,-1),ve=B({__name:"Information",setup(g){const{t:a}=F(),I=V(),{handleValidate:m}=Q(),{doUserField:t}=W(),{pop:y,commonsSaveHandle:c,commonsSaveSuccess:k,commonsSaveFalse:r,closePop:E}=X(),{getRegistrationFormInfo:$,dropdownAll:_}=Z();let l=S({phoneNumber:{value:I.memberInfo.phoneNo,err:"",field:"phoneNumber"},email:{value:I.memberInfo.Email,err:"",field:"email"},chLastName:{value:"",err:"",field:"chLastName"},chName:{value:"",err:"",field:"chName"},enLastName:{value:"",err:"",field:"enLastName"},enName:{value:"",err:"",field:"enName"},sex:{value:0,err:"",field:"sex"},dob:{value:"",err:"",field:"dob"},ageGroups:{value:"",err:"",field:"ageGroups"},addressId:{value:"",err:"",field:"addressId"},districtsid:{value:"",err:"",field:"districtsid"},housingEstatesId:{value:"",err:"",field:"housingEstatesId"},textForHousingEstate:{value:"",err:"",field:"textForHousingEstate"},jobId:{value:"",err:"",field:"jobId"},incomesId:{value:"",err:"",field:"incomesId"}}),M=S({});const o=T(!1),G=T(),s=D(()=>({phoneNumber:t(a("MemberProfile.field.PhoneNo"),"i",!1,!1),email:t(a("MemberProfile.field.Email"),"i",!1,!1),chLastName:t(a("MemberProfile.field.chLastName"),"i",!1,o.value),chName:t(a("MemberProfile.field.chName"),"i",!1,o.value),enLastName:t(a("MemberProfile.field.enLastName"),"i",!0,o.value),enName:t(a("MemberProfile.field.enName"),"i",!0,o.value),sex:t(a("MemberProfile.field.Gender"),"r",!0,o.value),dob:t(a("MemberProfile.field.Dob"),"i",!0,o.value),ageGroups:t(a("MemberProfile.field.ageGroups"),"d",!0,o.value),addressId:t(a("MemberProfile.field.addressId"),"d",!0,o.value),districtsid:t(a("MemberProfile.field.districtsid"),"d",!0,o.value),housingEstatesId:t(a("MemberProfile.field.housingEstatesId"),"d",!0,o.value),textForHousingEstate:t(a("MemberProfile.field.textForHousingEstate"),"i",!0,o.value),jobId:t(a("MemberProfile.field.jobId"),"d",!0,o.value),incomesId:t(a("MemberProfile.field.incomesId"),"d",!0,o.value)})),w=()=>{$(),M=JSON.parse(JSON.stringify(l))},O=()=>{L(!1),console.log("editValueTemp:",M),l=JSON.parse(JSON.stringify(M)),G.value+=1},L=i=>{o.value=i},f=i=>{l[i.field].value=i.value,m(l[i.field]).then(P=>{const{isSuccess:N,data:H}=P;l[i.field].err=N?"":H})},J=()=>{let i=Object.values(l),P=0;for(let N in i)m(i[N]).then(H=>{const{isSuccess:z,data:K}=H;l[i[N].field].err=z?"":K,P+=1,P==i.length&&(console.log("onSubmit check all done"),i.some(R=>R.err)||(console.log("all correct!"),c(),M=JSON.parse(JSON.stringify(l))))})},Y=()=>{y.step=2,k(),L(!1)};return U(()=>{w()}),(i,P)=>e(s)?(d(),h("form",{key:G.value},[n(u,{label:e(s).phoneNumber,value:e(l).phoneNumber},null,8,["label","value"]),n(u,{label:e(s).email,value:e(l).email},null,8,["label","value"]),n(u,{label:e(s).chLastName,value:e(l).chLastName,onChange:f},null,8,["label","value"]),n(u,{label:e(s).chName,value:e(l).chName,onChange:f},null,8,["label","value"]),n(u,{label:e(s).enLastName,value:e(l).enLastName,onChange:f},null,8,["label","value"]),n(u,{label:e(s).enName,value:e(l).enName,onChange:f},null,8,["label","value"]),n(u,{label:e(s).sex,value:e(l).sex,items:e(_).data.sexs,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).ageGroups,value:e(l).ageGroups,items:e(_).data.ageGroup,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).dob,value:e(l).dob,onChange:f},null,8,["label","value"]),n(u,{label:e(s).addressId,value:e(l).addressId,items:e(_).data.areas,filter:!0,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).districtsid,value:e(l).districtsid,items:e(_).data.districts,filter:!0,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).housingEstatesId,value:e(l).housingEstatesId,items:e(_).data.housingEstatesId,search:!0,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).textForHousingEstate,value:e(l).textForHousingEstate,onChange:f},null,8,["label","value"]),n(u,{label:e(s).jobId,value:e(l).jobId,items:e(_).data.jobs,onChange:f},null,8,["label","value","items"]),n(u,{label:e(s).incomesId,value:e(l).incomesId,items:e(_).data.incomesgroups,onChange:f},null,8,["label","value","items"]),p("div",ce,[o.value?b("",!0):(d(),h("div",{key:0,class:"btn btn-red",onClick:P[0]||(P[0]=N=>L(!0))},[fe,C(v(i.$t("button.edit")),1)])),o.value?(d(),h("div",{key:1,class:"btn",onClick:O},[be,C(v(i.$t("button.back")),1)])):b("",!0),o.value?(d(),h("div",{key:2,class:"btn btn-red",onClick:P[1]||(P[1]=N=>J())},[pe,C(v(i.$t("button.save")),1)])):b("",!0)]),n(me,{pop:e(y),onBack:e(E),onSave:Y},null,8,["pop","onBack"])])):b("",!0)}}),he={key:0},ge=B({__name:"History",setup(g){const{t:a}=F();V();const I=S({gridTemplateColumns:"2fr 1fr 1fr 2fr 60px 2fr 85px 85px 85px"}),m=S({id:"0",tableTemp:[{id:123,BusinessUnit:{tc:"中文1",en:"Eng"},Date:"2023/10/10",Time:"13:00:00",TransactionID:"077777777",Point:"3",Transactionamount:"GenderGenderGenderGenderGenderGender",MarketID:"Status",ShopID:"Status",Approved:!0},{id:456,BusinessUnit:{tc:"中文2",en:"Eng"},Date:"2023/10/10",Time:"13:00:00",TransactionID:"077777777",Point:"3",Transactionamount:"GenderGenderGenderGenderGenderGender",MarketID:"Status",ShopID:"Status",Approved:!1}]}),t=S({each:10,total:2}),y=D(()=>[{name:a("MemberProfile.history.BusinessUnit"),type:1},{name:a("MemberProfile.history.Date"),type:1},{name:a("MemberProfile.history.Time"),type:1},{name:a("MemberProfile.history.TransactionID"),type:1},{name:a("MemberProfile.history.Point"),type:1},{name:a("MemberProfile.history.Transactionamount"),type:1},{name:a("MemberProfile.history.MarketID"),type:1},{name:a("MemberProfile.history.ShopID"),type:1},{name:a("MemberProfile.history.Approved"),type:2}]),c=D(()=>m.tableTemp.map(r=>({value:r,icon:r.Approved?"fa-check":"fa-times",css:r.Approved?"":"text-red",data:{BusinessUnit:r.BusinessUnit,Date:r.Date,Time:r.Time,TransactionID:r.TransactionID,Point:r.Point,Transactionamount:r.Transactionamount,MarketID:r.MarketID,ShopID:r.ShopID,Approved:r.Approved?"fa-check":"fa-times"}}))),k=()=>{};return(r,E)=>{const $=ee("el-pagination");return e(c).length!=0?(d(),h("section",he,[n(re,{total:t.total,tableData:e(c),tableTitle:e(y),PCgridTemplateColumns:I},null,8,["total","tableData","tableTitle","PCgridTemplateColumns"]),n($,{"page-size":t.each,layout:"prev, pager, next",total:e(c).length,onCurrentChange:k},null,8,["page-size","total"])])):b("",!0)}}}),Ie={class:"memberInformation-page"},ye={key:0,class:"label-input"},_e={key:1,class:"label-input"},Pe={class:"member-data"},ke={class:"line"},Me={class:"line"},Ge=B({__name:"index",setup(g){const a=j(),I=V(),{t:m}=F(),t=T(0),y=T(ae().locale("zh-tw").format("YYYY")),c=S({type:0,value:"",businessUnit:0,shop:0,shopDisabled:!0}),k=T(0),r=D(()=>[{name:m("MemberProfile.page.memberProfile"),icon:"fa-portrait",act:!0},{name:m("MemberProfile.page.transactionHistory"),icon:"fa-address-card",act:!1}]),E=D(()=>[]),$=D(()=>[]);te(()=>a.language,()=>{k.value+=1});const _=()=>{let s=window.history.state.id;I.memberInfo.id!==s&&(I.setMemberInfo(I.nullMemberInfo),se.push({name:"Search member information"}))},l=s=>{c.type=s.id,c.value=s.value},M=s=>{c.businessUnit=s,c.shopDisabled=!1},o=()=>{},G=s=>{t.value=s};return U(()=>{_()}),(s,w)=>(d(),h("div",Ie,[n(le,{label:s.$t("MemberProfile.field.MemberID"),onSearch:l},null,8,["label"]),t.value==1?(d(),h("div",ye,[p("label",null,v(s.$t("MemberProfile.field.BusinessUnit")),1),n(A,{value:c.businessUnit,items:e(E),filter:!0,css:"normel-input",onChange:M},null,8,["value","items"])])):b("",!0),t.value==1?(d(),h("div",_e,[p("label",null,v(s.$t("MemberProfile.field.Shop")),1),n(A,{value:c.shop,items:e($),filter:!0,css:"normel-input",disabled:c.shopDisabled,onChange:o},null,8,["value","items","disabled"])])):b("",!0),p("div",Pe,[p("div",ke,v(e(m)("MemberProfile.field.point"))+" :2000",1),p("div",Me,v(y.value)+" "+v(e(m)("MemberProfile.field.expiryPoint"))+" :1000",1)]),(d(),x(ne,{items:e(r),onChange:G,key:k.value},null,8,["items"])),t.value==0?(d(),x(ve,{key:2})):b("",!0),t.value==1?(d(),x(ge,{key:3})):b("",!0)]))}});export{Ge as default};
