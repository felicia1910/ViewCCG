import{d as M,h as I,c as B,w as y,a as f,b as u,e as v,g as a,f as b,t as m,n as s,z,j as q,p as G,l as T,r as C,o as J,k,m as _,H as K,I as L}from"./index-4405b5ba.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-c5acbf2f.js";import{_ as Q}from"./memberData.vue_vue_type_script_setup_true_lang-21b6be4e.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-5a95ef0c.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-849de14f.js";import"./SearchBox.vue_vue_type_script_setup_true_lang-a6a08cb4.js";const Z={key:0},ee={class:"textColor"},te=a("i",{class:"fas fa-undo-alt"},null,-1),ne=a("i",{class:"fas fa-check"},null,-1),ae=M({__name:"SettingPopup",props:{editPoint:null,pop:null},emits:["back","handleYes"],setup(i,{emit:n}){const d=i,{t:D}=I();return(h,r)=>i.pop.value?(u(),B(X,{key:0,title:i.pop.title,content:i.pop.content,css:i.pop.css},{content:y(()=>[i.pop.step==1?(u(),v("div",Z,[a("p",null,[b(m(s(D)("PointManagment.PointAdjustment.showMsg.Confirm")),1),a("span",ee,m(d.editPoint),1)])])):f("",!0)]),"btn-content":y(()=>[i.pop.step==1?(u(),v("div",{key:0,class:"btn",onClick:r[0]||(r[0]=c=>n("back"))},[te,b(m(s(D)("button.no")),1)])):f("",!0),i.pop.step==1?(u(),v("div",{key:1,class:"btn btn-red",onClick:r[1]||(r[1]=c=>n("handleYes"))},[ne,b(m(s(D)("button.yes")),1)])):f("",!0)]),_:1},8,["title","content","css"])):f("",!0)}}),oe={class:"PointAdjustment"},se={class:"searchBox"},le={class:"showAllTable"},ie={key:0,class:"page-err-mes prMsg"},de={class:"btn-box"},re=a("i",{class:"fas fa-undo-alt"},null,-1),ce=a("i",{class:"fas fa-check"},null,-1),Ae=M({__name:"index",setup(i){const{t:n}=I(),d=z(),{doUserField:D,memberIDValue:h,getMemberBoolean:r}=q(),{pop:c,commonsSaveHandle:ue,commonsSaveSuccess:me,commonsSaveFalse:fe,closePop:N}=G(),P=T("");T(!0);const g=T(0),A=T(!1),p=C({tableTemp:[{id:"1",Close:"fa-times",Date:"",TransactionID:"",BU:"",Point:"",TenantCode:"",AddANDDeduct:"",Reason:""},{id:"2",Close:"fa-times",Date:"",TransactionID:"",BU:"",Point:"",TenantCode:"",AddANDDeduct:"",Reason:""}]}),j=C({gridTemplateColumns:"50px 2fr 1fr 1fr 1fr 1fr 1fr 2fr"}),t=C([{Date:{value:"",err:"",field:"Date"},TransactionID:{value:"",err:"",field:"TransactionID"},BU:{value:"",err:"",field:"BU"},Point:{value:"",err:"",field:"Point"},TenantCode:{value:"",err:"",field:"TenantCode"},AddANDDeduct:{value:"",err:"",field:"AddANDDeduct"},Reason:{value:"",err:"",field:"Reason"}},{Date:{value:"",err:"",field:"Date"},TransactionID:{value:"",err:"",field:"TransactionID"},BU:{value:"",err:"",field:"BU"},Point:{value:"",err:"",field:"Point"},TenantCode:{value:"",err:"",field:"TenantCode"},AddANDDeduct:{value:"",err:"",field:"AddANDDeduct"},Reason:{value:"",err:"",field:"Reason"}}]);J(()=>{F()});const S=k(()=>n("PointManagment.PointAdjustment.showMsg.PointIsNaN")),U=k(()=>[{name:"",type:2,key:"Close"},{name:n("PointManagment.PointAdjustment.tableTitle.Date"),type:6,key:"Date"},{name:n("PointManagment.PointAdjustment.tableTitle.TransactionID"),type:4,key:"TransactionID"},{name:n("PointManagment.PointAdjustment.tableTitle.BU"),type:5,key:"BU"},{name:n("PointManagment.PointAdjustment.tableTitle.Point"),type:4,key:"Point"},{name:n("PointManagment.PointAdjustment.tableTitle.TenantCode"),type:4,key:"TenantCode"},{name:n("PointManagment.PointAdjustment.tableTitle.AddANDDeduct"),type:5,key:"AddANDDeduct"},{name:n("PointManagment.PointAdjustment.tableTitle.Reason"),type:5,key:"Reason"}]),x=k(()=>p.tableTemp.map(e=>({value:e,icon:"fa-times",data:{Close:e.Close,Date:e.Date,TransactionID:e.TransactionID,BU:e.BU,Point:e.Point,TenantCode:e.TenantCode,AddANDDeduct:e.AddANDDeduct,Reason:e.Reason}}))),R=()=>{N()},$=()=>{if(P.value="",!t.every(o=>!isNaN(o.Point.value))){P.value=S;return}let l=0;for(let o in t)t[o].AddANDDeduct.value==="0"&&(l+=Number(t[o].Point.value)),t[o].AddANDDeduct.value==="1"&&(l-=Number(t[o].Point.value));g.value=l,c.step=1,c.title=n("PointManagment.PointAdjustment.alertTitle.Confirm"),c.value=!0,c.css=""},w=()=>{console.log("YES"),N()},V=()=>{for(let e in t)t[e].Date.value="",t[e].TransactionID.value="",t[e].BU.value="",t[e].Point.value="",t[e].TenantCode.value="",t[e].AddANDDeduct.value="",t[e].Reason.value=""},Y=e=>{let l=null;for(let o=0;o<p.tableTemp.length;o++)if(p.tableTemp[o].id==e.id){l=o;break}else continue;l===null||l===p.tableTemp.length-1||(t.splice(l,1),p.tableTemp.splice(l,1))},H=e=>{d.setMemberInfo(e),A.value=!0},E=()=>{A.value=!1,d.setMemberInfo(d.nullMemberInfo)},F=()=>{d.setMemberInfo(d.nullMemberInfo)};return(e,l)=>(u(),v("div",oe,[a("div",se,[_(O,{value:s(h),closeTable:s(r),onSearch:E,onClick:H},null,8,["value","closeTable"]),s(r)?(u(),B(Q,{key:0})):f("",!0)]),K(a("section",null,[a("div",le,[_(W,{tableData:s(x),tableTitle:s(U),PCgridTemplateColumns:j,editValue:t,onClick:Y},null,8,["tableData","tableTitle","PCgridTemplateColumns","editValue"])]),P.value?(u(),v("div",ie,m(P.value),1)):f("",!0),a("div",de,[a("div",{class:"btn",onClick:V},[re,b(m(s(n)("button.clear")),1)]),a("div",{class:"btn btn-red",onClick:$},[ce,b(m(s(n)("button.confirm")),1)])])],512),[[L,A.value]]),_(ae,{pop:s(c),editPoint:g.value,onBack:R,onHandleYes:w},null,8,["pop","editPoint"])]))}});export{Ae as default};
